(function(){var BID="alltera-animated-bg",SID="alltera-bg-style",TSID="alltera-type-style",BSID="alltera-bubble-style";function S(id,css){if(document.getElementById(id))return;var s=document.createElement("style");s.id=id;s.textContent=css;document.head.appendChild(s)}function BG(){if(document.getElementById(BID))return;var d=document.createElement("div");d.id=BID;d.setAttribute("aria-hidden","true");document.body.appendChild(d)}function bg(){S(SID,"html,body{background:#bdbdbd!important}#"+BID+"{position:fixed;inset:0;z-index:2147483646;pointer-events:none;background:radial-gradient(900px 700px at 15% 20%,rgba(0,255,255,.95),transparent 60%),radial-gradient(900px 700px at 85% 25%,rgba(255,0,255,.9),transparent 60%),radial-gradient(900px 700px at 65% 80%,rgba(255,200,0,.85),transparent 60%),linear-gradient(120deg,rgba(30,30,30,1),rgba(240,240,240,1),rgba(80,80,80,1),rgba(230,230,230,1));background-size:260% 260%,260% 260%,260% 260%,500% 500%;animation:allteraShift 8s ease-in-out infinite;filter:saturate(0) contrast(2.3) brightness(1.05);opacity:1;mix-blend-mode:soft-light}@keyframes allteraShift{0%{background-position:0% 50%,100% 50%,50% 0%,0% 50%}50%{background-position:100% 50%,0% 50%,50% 100%,100% 50%}100%{background-position:0% 50%,100% 50%,50% 0%,0% 50%}}@media(max-width:768px){#"+BID+"{background-size:220% 220%,220% 220%,220% 220%,420% 420%;animation-duration:10s;filter:saturate(0) contrast(1.7) brightness(1.05)}}")}function typeCss(){S(TSID,'.atw{display:inline-block}.atc:after{content:"|";display:inline-block;margin-left:2px;opacity:.9;animation:atb 1s steps(2,end) infinite}@keyframes atb{0%,49%{opacity:1}50%,100%{opacity:0}}')}function bubbleCss(){S(BSID,'.ab{list-style:none!important;position:relative;border-radius:999px;padding:14px 18px 14px 42px;margin:12px 0;background:linear-gradient(120deg,#141414,#2f2f2f,#0f0f0f,#3a3a3a);background-size:340% 340%;animation:abg 6.5s ease-in-out infinite;box-shadow:0 12px 28px rgba(0,0,0,.22);color:#fff}.ab:before{content:"•";position:absolute;left:18px;top:12px;font-size:22px;line-height:1;opacity:.9}@keyframes abg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}.ab.ar{opacity:0;transform:translateY(10px);transition:opacity .55s ease,transform .55s ease}.ab.ar.on{opacity:1;transform:none}')}function N(s){return(s||"").replace(/\uFEFF/g,"").replace(/\u00A0/g," ").replace(/\s+/g," ").trim()}function stripBullet(s){return N(s).replace(/^[•\u2022\-\–\—]\s*/,"")}var HEAD=["Alltera — умные устройства для заботы о себе.","Почему мы?","Мы выбираем устройства, которые реально упрощают жизнь — и дома, и после тренировок.","Массажные пистолеты","Стайлеры для волос"];var BSTART=["Бережно и быстро:","Под любую задачу:","Точная настройка:","Удобно в руке:","Снимает напряжение","Скорость 1800","8 насадок","Быстрая сушка","Нагрев до 100","3 температурных режима"];function nodes(){return[].slice.call(document.querySelectorAll("h1,h2,h3,p,li"))}function isBad(el){return!el||!el.textContent||el.closest("a,button,input,textarea,select")}function isHead(t){for(var i=0;i<HEAD.length;i++)if(t===HEAD[i])return 1;return 0}function isBullet(t){t=stripBullet(t);for(var i=0;i<BSTART.length;i++)if(t.indexOf(BSTART[i])===0)return 1;return 0}function wrap(el,txt){if(el.dataset.atp==="1")return null;var sp=el.querySelector(":scope>.atw");if(sp)return sp;var s=document.createElement("span");s.className="atw";s.textContent=txt;while(el.firstChild)el.removeChild(el.firstChild);el.appendChild(s);return s}function typeSpan(el,sp,txt,speed,delay,done){if(sp.dataset.att==="1"){done&&done();return}sp.dataset.att="1";el.dataset.atp="1";el.classList.add("atc");sp.textContent="";var i=0;setTimeout(function tick(){if(i<txt.length){sp.textContent+=txt.charAt(i++);setTimeout(tick,speed)}else{el.classList.remove("atc");done&&done()}},delay)}var q=[],busy=0;function pump(){if(busy||!q.length)return;busy=1;var el=q.shift();if(isBad(el)){busy=0;pump();return}var t0=N(el.textContent);var isB=isBullet(t0);var txt=isB?stripBullet(t0):t0;if(!txt){busy=0;pump();return}var sp=wrap(el,txt);if(!sp){busy=0;pump();return}typeSpan(el,sp,txt,55,250,function(){busy=0;pump()})}function enqueue(el){if(!el||el.dataset.atp==="1")return;if(q.indexOf(el)===-1)q.push(el);pump()}function pick(){var ns=nodes(),out=[];for(var i=0;i<ns.length;i++){var el=ns[i];if(isBad(el))continue;var t=N(el.textContent);if(!t)continue;if(isHead(t)||isBullet(t))out.push(el)}return out}function bullets(){var ns=nodes();for(var i=0;i<ns.length;i++){var el=ns[i];if(isBad(el))continue;var t=N(el.textContent);if(!t)continue;if(isBullet(t))el.classList.add("ab")} }function reveal(){var els=[].slice.call(document.querySelectorAll(".ab"));for(var i=0;i<els.length;i++)els[i].classList.add("ar");if("IntersectionObserver"in window){var io=new IntersectionObserver(function(es){es.forEach(function(x){if(x.isIntersecting){x.target.classList.add("on");io.unobserve(x.target)}})},{threshold:.12});els.forEach(function(e){io.observe(e)})}else{els.forEach(function(e){e.classList.add("on")})}}function typing(){var els=pick();if("IntersectionObserver"in window){var io=new IntersectionObserver(function(es){es.forEach(function(x){if(x.isIntersecting){io.unobserve(x.target);enqueue(x.target)}})},{threshold:.12});els.forEach(function(e){if(e.dataset.atp!=="1")io.observe(e)})}else{els.forEach(enqueue)}}var started=0;function run(){if(started||!document.body)return;started=1;bg();BG();typeCss();bubbleCss();function tick(){bullets();reveal();typing()}tick();if("MutationObserver"in window){var t;new MutationObserver(function(){clearTimeout(t);t=setTimeout(tick,250)}).observe(document.body,{childList:true,subtree:true})}setInterval(function(){bullets();reveal()},2500)}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",run);else run()})();
