(function(){var BID="alltera-animated-bg",SID="alltera-bg-style",TSID="alltera-type-style",BSID="alltera-bubble-style",PID="alltera-parallax-style",runLock=0;function addStyle(id,css){if(document.getElementById(id))return;var s=document.createElement("style");s.id=id;s.textContent=css;document.head.appendChild(s)}function ensureBg(){if(document.getElementById(BID))return;var d=document.createElement("div");d.id=BID;d.setAttribute("aria-hidden","true");document.body.appendChild(d)}function bg(){addStyle(SID,"html,body{background:#bdbdbd!important}#"+BID+"{position:fixed;inset:0;z-index:2147483646;pointer-events:none;background:radial-gradient(900px 700px at 15% 20%,rgba(0,255,255,.95),transparent 60%),radial-gradient(900px 700px at 85% 25%,rgba(255,0,255,.9),transparent 60%),radial-gradient(900px 700px at 65% 80%,rgba(255,200,0,.85),transparent 60%),linear-gradient(120deg,rgba(30,30,30,1),rgba(240,240,240,1),rgba(80,80,80,1),rgba(230,230,230,1));background-size:260% 260%,260% 260%,260% 260%,500% 500%;animation:allteraShift 8s ease-in-out infinite;filter:saturate(0) contrast(2.3) brightness(1.05);opacity:1;mix-blend-mode:soft-light}@keyframes allteraShift{0%{background-position:0% 50%,100% 50%,50% 0%,0% 50%}50%{background-position:100% 50%,0% 50%,50% 100%,100% 50%}100%{background-position:0% 50%,100% 50%,50% 0%,0% 50%}}@media (max-width:768px){#"+BID+"{background-size:220% 220%,220% 220%,220% 220%,420% 420%;animation-duration:10s;filter:saturate(0) contrast(1.7) brightness(1.05)}}")}function typeCss(){addStyle(TSID,'.atc:after{content:"|";display:inline-block;margin-left:2px;opacity:.85;animation:atb 1s steps(2,end) infinite}@keyframes atb{0%,49%{opacity:1}50%,100%{opacity:0}}')}function bubbleCss(){addStyle(BSID,".ab{display:block;position:relative;border-radius:999px;padding:14px 18px 14px 44px;margin:12px 0;background:linear-gradient(135deg,#d9d9d9,#bfbfbf,#e1e1e1);background-size:240% 240%;animation:abg 7s ease-in-out infinite;box-shadow:0 10px 26px rgba(0,0,0,.14);color:#141414}.ab:before{content:'•';position:absolute;left:18px;top:14px;font-size:20px;line-height:1;opacity:.6;color:#111}.ab *{color:inherit}.ar{opacity:0;transform:translateY(10px);transition:opacity .55s ease,transform .55s ease}.ar.on{opacity:1;transform:none}@keyframes abg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}")}function parallaxCss(){addStyle(PID,".apx{will-change:transform;transform:translate3d(0,0,0)}")}function norm(s){return(s||"").replace(/\uFEFF/g,"").replace(/\u00A0/g," ").replace(/\s+/g," ").trim()}function badText(t){if(!t)return 1;var x=t;return(x.length>2200||x.indexOf("{")>-1&&x.indexOf("}")>-1&&x.indexOf("--")>-1||x.indexOf("function(")>-1||x.indexOf("var ")>-1)}function visible(el){if(!el||el.nodeType!==1)return 0;var cs=getComputedStyle(el);if(cs.display==="none"||cs.visibility==="hidden"||+cs.opacity===0)return 0;var r=el.getBoundingClientRect();return(r.bottom>0&&r.top<innerHeight)}var HEAD=["Alltera —","Почему мы?","Мы выбираем устройства"];var STARTS=["Бережно и быстро:","Под любую задачу:","Точная настройка:","Удобно в руке:","Снимает напряжение","Скорость 1800","8 насадок","Быстрая сушка","Нагрев до 100","3 температурных режима"];function hasStart(t){for(var i=0;i<STARTS.length;i++)if(t.indexOf(STARTS[i])===0)return 1;return 0}function isHead(t){for(var i=0;i<HEAD.length;i++)if(t.indexOf(HEAD[i])===0)return 1;return 0}function nodes(){return[].slice.call(document.querySelectorAll("h1,h2,h3,p,li"))}function splitBulletsInElement(el){if(!el||el.dataset.atsplit==="1")return 0;if(el.closest("a,button,input,textarea,select"))return 0;if(el.tagName==="LI")return 0;var t=norm(el.textContent);if(!t||badText(t))return 0;var hasDot=t.indexOf("•")>-1||t.indexOf("\u2022")>-1;if(!hasDot)return 0;var ok=0;for(var i=0;i<STARTS.length;i++){if(t.indexOf(STARTS[i])>-1){ok=1;break}}if(!ok)return 0;var parts=t.split(/(?:\s*[•\u2022]\s*)/).map(function(x){return norm(x)}).filter(function(x){return x&&x.length>2});if(parts.length<2)return 0;var wrap=document.createElement("div");wrap.dataset.atwrap="1";el.parentNode.insertBefore(wrap,el);for(var j=0;j<parts.length;j++){var b=document.createElement("div");b.className="ab ar";b.dataset.atxt=parts[j];b.dataset.atdone="0";b.textContent="";wrap.appendChild(b)}el.dataset.atsplit="1";el.style.display="none";return 1}function prepareBlocks(){var ns=nodes();for(var i=0;i<ns.length;i++){var el=ns[i];if(!el||el.dataset.atprep==="1")continue;if(el.closest("a,button,input,textarea,select"))continue;var t=norm(el.textContent);if(!t||badText(t))continue;if(el.tagName==="LI"){var tt=t.replace(/^[•\u2022\-\–\—]\s*/,"");if(hasStart(tt)){el.dataset.atprep="1";el.classList.add("ab","ar");el.dataset.atxt=tt;el.dataset.atdone="0";el.textContent="";}}else{var t2=t.replace(/^[•\u2022\-\–\—]\s*/,"");if(hasStart(t2)&&t!==t2){el.dataset.atprep="1";el.classList.add("ab","ar");el.dataset.atxt=t2;el.dataset.atdone="0";el.textContent="";}else splitBulletsInElement(el)}}}function prepareHeads(){var ns=nodes();for(var i=0;i<ns.length;i++){var el=ns[i];if(!el||el.dataset.athead==="1")continue;if(el.tagName!=="H1"&&el.tagName!=="H2"&&el.tagName!=="H3"&&el.tagName!=="P")continue;if(el.closest("a,button,input,textarea,select"))continue;var t=norm(el.textContent);if(!t||badText(t))continue;if(isHead(t)){el.dataset.athead="1";el.dataset.atxt=t;el.dataset.atdone="0";el.classList.add("ar");el.textContent=""}}}function revealOnce(el){if(!el||el.classList.contains("on"))return;el.classList.add("on")}function revealIO(){var list=[].slice.call(document.querySelectorAll(".ar"));if("IntersectionObserver"in window){var io=new IntersectionObserver(function(es){es.forEach(function(x){if(x.isIntersecting){revealOnce(x.target);io.unobserve(x.target)}})},{threshold:.12});list.forEach(function(e){io.observe(e)})}else list.forEach(revealOnce)}function speedFor(txt){if(txt.indexOf("Почему мы?")===0)return 95;return 55}function typeEl(el,txt){if(!el||el.dataset.attyping==="1"||el.dataset.atdone==="1")return 0;el.dataset.attyping="1";el.classList.add("atc");revealOnce(el);el.textContent="";var i=0,sp=speedFor(txt),delay=260;setTimeout(function tick(){if(i<txt.length){el.textContent+=txt.charAt(i++);setTimeout(tick,sp)}else{el.dataset.atdone="1";el.dataset.attyping="0";el.classList.remove("atc");}},delay);return delay+txt.length*sp}function inView(el){var r=el.getBoundingClientRect();return r.top<innerHeight*.88&&r.bottom>0}function queue(){var out=[];var ns=[].slice.call(document.querySelectorAll("[data-atxt]"));ns.sort(function(a,b){if(a===b)return 0;var p=a.compareDocumentPosition(b);return(p&Node.DOCUMENT_POSITION_FOLLOWING)?-1:1});for(var i=0;i<ns.length;i++){var el=ns[i];if(el.dataset.atdone==="1")continue;if(!visible(el))continue;out.push(el)}return out}function seq(){if(runLock)return;runLock=1;var q=queue(),i=0;function next(){if(i>=q.length){runLock=0;return}var el=q[i++];if(!el||el.dataset.atdone==="1"){next();return}if(!inView(el)){runLock=0;return}var txt=el.dataset.atxt||"";txt=norm(txt);if(!txt){el.dataset.atdone="1";next();return}var ms=typeEl(el,txt);setTimeout(next,(ms||0)+140)}next()}function parallax(){parallaxCss();var imgs=[].slice.call(document.querySelectorAll(".ins-tile--image-right img,.ins-tile--image-left img,.ins-tile__image img,figure img"));imgs=imgs.filter(function(im){try{return im&&im.naturalWidth>400&&im.naturalHeight>400}catch(e){return 0}}).slice(0,6);imgs.forEach(function(im){im.classList.add("apx")});var raf=0;function on(){raf=0;var y=window.scrollY||document.documentElement.scrollTop||0;for(var i=0;i<imgs.length;i++){var im=imgs[i];if(!im||!im.getBoundingClientRect)continue;var r=im.getBoundingClientRect();var mid=r.top+r.height/2;var d=(mid-innerHeight/2)/innerHeight;var t=Math.max(-12,Math.min(12,-d*12));im.style.transform="translate3d(0,"+t+"px,0)"} }function s(){if(!raf)raf=requestAnimationFrame(on)}addEventListener("scroll",s,{passive:true});addEventListener("resize",s);s()}function tickAll(){prepareBlocks();prepareHeads();revealIO();seq()}function start(){if(!document.body)return;bg();ensureBg();typeCss();bubbleCss();tickAll();parallax();if("MutationObserver"in window){var t;new MutationObserver(function(){clearTimeout(t);t=setTimeout(tickAll,220)}).observe(document.body,{childList:true,subtree:true})}setInterval(function(){prepareBlocks();prepareHeads();seq()},1200)}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",start);else start()})();
